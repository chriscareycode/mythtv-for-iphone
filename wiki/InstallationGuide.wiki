#summary Installation Guide.



===MythTV for iPhone===
Copyright 2008 Chris Carey (http://chriscarey.com). 
This program is distributed under the terms of the GNU General Public License

== Introduction ==

*This software is not a native iPhone app.* It is a web application which is installed on your MythTV server. You access the software by using your iPhone web browser and hitting a URL on your MythTV server. 

== Apache Setup ==

You need to set up a /recordings/ Alias for watching videos.

In your apache conf file add:
{{{
Alias /recordings /var/lib/mythtv/recordings

<Location /recordings>
  Options Indexes
</Location>
}}}


== Dependency Install ==

  * Install Smarty on your web server. Download Smarty at: http://smarty.org or Debian based systems: *apt-get install smarty*
  * Install php-curl. Debian based systems: *apt-get install php5-curl*
  * Install ffmpeg and it's dependencies. You should be able to run the conversion script by hand via command-line. More info at this link http://mythtv.org/wiki/index.php/Streaming_to_iPod_touch_or_iPhone

== Transcoding Setup ==

I followed this guide:
http://mythtv.org/wiki/index.php/Streaming_to_iPod_touch_or_iPhone

Which for the most part is good, but I had to hack the mythipod.sh file so that it worked on my server. You should be able to test if the transcoding is working by running it on the command line by hand and have it work. The command line with my script has one parameter which is the file to be transcoded. Use it like this:

{{{
/usr/local/bin/mythipod.sh file.mpg
}}}

Here is my hacked version of /usr/local/bin/mythipod.sh:
{{{
#!/bin/bash

#MythIPod v.1 http://www.chiefhacker.com/

#Copyright 2007 Chris Lorenzo et al
#This software is licensed under the CC-GNU LGPL <http://creativecommons.org/licenses/LGPL/2.1/>
#Additionally modified 2007 Doug Johnson
#Modified by Chris Carey, 2008

#if [ ! $# == 2 ]; then
#  echo "Usage: $0 directory file"
#  exit
#fi

directory="$1";
file="$2";

#Get the video information
video_info=`mplayer -vo null -ao null -frames 10 -identify "${directory}" 2>/dev/null`

#Command line grep sucks, but we make due...
aspect=`echo $video_info | egrep -oe "Movie-Aspect is [0-9:.]+" | egrep -o "[0-9:.]+"`
framerate=`echo $video_info | egrep -oe "[0-9.]+ fps" | egrep -o "[0-9.]+"`

# set resolution by aspect ratio

if [ "$aspect" == "1.78:1" ]
then
  width=432
  height=240
  vbitrate=480k
else
  width=480
  height=360
  vbitrate=378k
fi

abitrate=128k

# Create the MP4

ffmpeg -i "${directory}" -acodec aac -ab ${abitrate} -ac 2 -s ${width}x${height} -vcodec mpeg4 -b ${vbitrate} -flags +aic+mv4+trell -mbd 2 -cmp 2 -subcmp 2 -g 250 -maxrate 512k -bufsize 2M -title "${file}" "${directory}.mp4"
}}}

== Install Smarty Templates in smarty templates folder ==

  * templates/mythiphone/main.tpl


==Install files in the application folder==

  * mythiphone/i_db.php
  * mythiphone/i_functions.php
  * mythiphone/i_settings.php
  * mythiphone/index.php

==Customize i_settings.php==

  * copy i_settings.php.dist to i_settings.php

You must edit this file with correct paths and options

== All Done!! ==